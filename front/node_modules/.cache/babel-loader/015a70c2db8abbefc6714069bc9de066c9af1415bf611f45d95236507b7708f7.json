{"ast":null,"code":"// PreRegistrationForm.js\nimport React,{useState}from'react';import{useNavigate}from'react-router-dom';import'./PreRegistrationForm.css';// 실제 서버 주소로 변경하세요\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL='http://localhost:8000';//const API_URL = 'http://34.64.196.23:8000';\nfunction PreRegistrationForm(){const[email,setEmail]=useState('');const[phone,setPhone]=useState('');const[privacyConsent,setPrivacyConsent]=useState(false);const[couponCode,setCouponCode]=useState('');const[isRegistered,setIsRegistered]=useState(false);const navigate=useNavigate();const handlePhoneChange=e=>{const value=e.target.value.replace(/[^\\d]/g,'');if(value.length<=11){setPhone(value);}};const handleSubmit=async e=>{e.preventDefault();if(!privacyConsent){alert('개인정보 수집 및 이용에 동의해주세요.');return;}if(phone.length!==11){alert('전화번호를 11자리로 입력해주세요.');return;}try{const response=await fetch(`${API_URL}/api/preregister`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,phone,privacy_consent:privacyConsent})});if(response.ok){const data=await response.json();setCouponCode(data.coupon_code);setIsRegistered(true);alert(`${data.message} 등록 시간: ${data.created_at}`);}else{const errorData=await response.json();alert(`오류: ${errorData.detail}`);}}catch(error){console.error('Error details:',error);alert(`사전 등록 중 오류가 발생했습니다: ${error.message}`);}};const resetForm=()=>{setEmail('');setPhone('');setPrivacyConsent(false);setCouponCode('');setIsRegistered(false);};const handleUseCoupon=()=>{navigate(`/use-coupon?code=${couponCode}`);};// 변경된 부분: handleEnterCoupon 함수\nconst handleEnterCoupon=()=>{navigate('/use-coupon');// 수정된 부분: 쿠폰 코드 없이 이동\n};if(isRegistered){return/*#__PURE__*/_jsxs(\"div\",{className:\"registration-success\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uC0AC\\uC804 \\uB4F1\\uB85D\\uC774 \\uC644\\uB8CC\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4!\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uADC0\\uD558\\uC758 \\uCFE0\\uD3F0 \\uCF54\\uB4DC: \",/*#__PURE__*/_jsx(\"strong\",{children:couponCode})]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uC774 \\uCF54\\uB4DC\\uB97C \\uC548\\uC804\\uD55C \\uACF3\\uC5D0 \\uBCF4\\uAD00\\uD574 \\uC8FC\\uC138\\uC694.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUseCoupon,children:\"\\uCFE0\\uD3F0 \\uC0AC\\uC6A9\\uD558\\uB7EC \\uAC00\\uAE30\"}),/*#__PURE__*/_jsx(\"button\",{onClick:resetForm,children:\"\\uC0C8\\uB85C \\uB4F1\\uB85D\\uD558\\uAE30\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"pre-registration-container\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"pre-registration-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"\\uC774\\uBA54\\uC77C \\uC8FC\\uC18C\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:phone,onChange:handlePhoneChange,placeholder:\"\\uC804\\uD654\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694 (\\uC22B\\uC790 11\\uC790\\uB9AC)\",pattern:\"[0-9]{11}\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\uC0AC\\uC804\\uB4F1\\uB85D\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"privacy-agreement\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"privacyConsent\",checked:privacyConsent,onChange:e=>setPrivacyConsent(e.target.checked),required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"privacyConsent\",children:\"\\uAC1C\\uC778\\uC815\\uBCF4 \\uC218\\uC9D1 \\uBC0F \\uC774\\uC6A9\\uC5D0 \\uB3D9\\uC758\\uD569\\uB2C8\\uB2E4.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"privacy-policy\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uAC1C\\uC778\\uC815\\uBCF4 \\uCC98\\uB9AC\\uBC29\\uCE68\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"1. \\uC218\\uC9D1\\uD558\\uB294 \\uAC1C\\uC778\\uC815\\uBCF4 \\uD56D\\uBAA9: \\uC774\\uBA54\\uC77C \\uC8FC\\uC18C, \\uC804\\uD654\\uBC88\\uD638\",/*#__PURE__*/_jsx(\"br\",{}),\"2. \\uC218\\uC9D1 \\uBC0F \\uC774\\uC6A9\\uBAA9\\uC801: \\uAC8C\\uC784 \\uC0AC\\uC804\\uC608\\uC57D \\uBC0F \\uAD00\\uB828 \\uC815\\uBCF4 \\uC548\\uB0B4\",/*#__PURE__*/_jsx(\"br\",{}),\"3. \\uBCF4\\uC720 \\uBC0F \\uC774\\uC6A9\\uAE30\\uAC04: \\uC0AC\\uC804\\uC608\\uC57D \\uC11C\\uBE44\\uC2A4 \\uC885\\uB8CC \\uC2DC\\uAE4C\\uC9C0\",/*#__PURE__*/_jsx(\"br\",{}),\"4. \\uB3D9\\uC758\\uB97C \\uAC70\\uBD80\\uD560 \\uAD8C\\uB9AC: \\uAC1C\\uC778\\uC815\\uBCF4 \\uC218\\uC9D1 \\uBC0F \\uC774\\uC6A9\\uC5D0 \\uB300\\uD55C \\uB3D9\\uC758\\uB97C \\uAC70\\uBD80\\uD560 \\uC218 \\uC788\\uC73C\\uBA70, \\uAC70\\uBD80 \\uC2DC \\uC0AC\\uC804\\uC608\\uC57D \\uC11C\\uBE44\\uC2A4 \\uC774\\uC6A9\\uC774 \\uC81C\\uD55C\\uB420 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"coupon-section\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uC774\\uBBF8 \\uCFE0\\uD3F0\\uC774 \\uC788\\uC73C\\uC2E0\\uAC00\\uC694?\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEnterCoupon,className:\"enter-coupon-button\",children:\"\\uCFE0\\uD3F0 \\uC785\\uB825\\uD558\\uAE30\"})]})]});}export default PreRegistrationForm;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","API_URL","PreRegistrationForm","email","setEmail","phone","setPhone","privacyConsent","setPrivacyConsent","couponCode","setCouponCode","isRegistered","setIsRegistered","navigate","handlePhoneChange","e","value","target","replace","length","handleSubmit","preventDefault","alert","response","fetch","method","headers","body","JSON","stringify","privacy_consent","ok","data","json","coupon_code","message","created_at","errorData","detail","error","console","resetForm","handleUseCoupon","handleEnterCoupon","className","children","onClick","onSubmit","type","onChange","placeholder","required","pattern","id","checked","htmlFor"],"sources":["/home/work/reservation/front/src/PreRegistrationForm.js"],"sourcesContent":["// PreRegistrationForm.js\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './PreRegistrationForm.css';\n\n// 실제 서버 주소로 변경하세요\nconst API_URL = 'http://localhost:8000';\n//const API_URL = 'http://34.64.196.23:8000';\n\nfunction PreRegistrationForm() {\n  const [email, setEmail] = useState('');\n  const [phone, setPhone] = useState('');\n  const [privacyConsent, setPrivacyConsent] = useState(false);\n  const [couponCode, setCouponCode] = useState('');\n  const [isRegistered, setIsRegistered] = useState(false);\n  const navigate = useNavigate();\n\n  const handlePhoneChange = (e) => {\n    const value = e.target.value.replace(/[^\\d]/g, '');\n    if (value.length <= 11) {\n      setPhone(value);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!privacyConsent) {\n      alert('개인정보 수집 및 이용에 동의해주세요.');\n      return;\n    }\n    if (phone.length !== 11) {\n      alert('전화번호를 11자리로 입력해주세요.');\n      return;\n    }\n\n    try {\n      const response = await fetch(`${API_URL}/api/preregister`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, phone, privacy_consent: privacyConsent }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setCouponCode(data.coupon_code);\n        setIsRegistered(true);\n        alert(`${data.message} 등록 시간: ${data.created_at}`);\n      } else {\n        const errorData = await response.json();\n        alert(`오류: ${errorData.detail}`);\n      }\n    } catch (error) {\n      console.error('Error details:', error);\n      alert(`사전 등록 중 오류가 발생했습니다: ${error.message}`);\n    }\n  };\n\n  const resetForm = () => {\n    setEmail('');\n    setPhone('');\n    setPrivacyConsent(false);\n    setCouponCode('');\n    setIsRegistered(false);\n  };\n\n  const handleUseCoupon = () => {\n    navigate(`/use-coupon?code=${couponCode}`);\n  };\n\n  // 변경된 부분: handleEnterCoupon 함수\n  const handleEnterCoupon = () => {\n    navigate('/use-coupon'); // 수정된 부분: 쿠폰 코드 없이 이동\n  };\n\n  if (isRegistered) {\n    return (\n      <div className=\"registration-success\">\n        <h2>사전 등록이 완료되었습니다!</h2>\n        <p>귀하의 쿠폰 코드: <strong>{couponCode}</strong></p>\n        <p>이 코드를 안전한 곳에 보관해 주세요.</p>\n        <button onClick={handleUseCoupon}>쿠폰 사용하러 가기</button>\n        <button onClick={resetForm}>새로 등록하기</button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"pre-registration-container\">\n      <form onSubmit={handleSubmit} className=\"pre-registration-form\">\n        <input\n          type=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"이메일 주소를 입력하세요\"\n          required\n        />\n        <input\n          type=\"tel\"\n          value={phone}\n          onChange={handlePhoneChange}\n          placeholder=\"전화번호를 입력하세요 (숫자 11자리)\"\n          pattern=\"[0-9]{11}\"\n          required\n        />\n        <button type=\"submit\">사전등록</button>\n        \n        <div className=\"privacy-agreement\">\n          <input \n            type=\"checkbox\" \n            id=\"privacyConsent\" \n            checked={privacyConsent}\n            onChange={(e) => setPrivacyConsent(e.target.checked)}\n            required \n          />\n          <label htmlFor=\"privacyConsent\">개인정보 수집 및 이용에 동의합니다.</label>\n        </div>\n        \n        <div className=\"privacy-policy\">\n          <h4>개인정보 처리방침</h4>\n          <p>\n            1. 수집하는 개인정보 항목: 이메일 주소, 전화번호\n            <br />\n            2. 수집 및 이용목적: 게임 사전예약 및 관련 정보 안내\n            <br />\n            3. 보유 및 이용기간: 사전예약 서비스 종료 시까지\n            <br />\n            4. 동의를 거부할 권리: 개인정보 수집 및 이용에 대한 동의를 거부할 수 있으며, \n               거부 시 사전예약 서비스 이용이 제한될 수 있습니다.\n          </p>\n        </div>\n      </form>\n      \n      <div className=\"coupon-section\">\n        <p>이미 쿠폰이 있으신가요?</p>\n        <button onClick={handleEnterCoupon} className=\"enter-coupon-button\">쿠폰 입력하기</button>\n      </div>\n    </div>\n  );\n}\n\nexport default PreRegistrationForm;\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,2BAA2B,CAElC;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,OAAO,CAAG,uBAAuB,CACvC;AAEA,QAAS,CAAAC,mBAAmBA,CAAA,CAAG,CAC7B,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACU,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACY,cAAc,CAAEC,iBAAiB,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACc,UAAU,CAAEC,aAAa,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACgB,YAAY,CAAEC,eAAe,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAAAkB,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAkB,iBAAiB,CAAIC,CAAC,EAAK,CAC/B,KAAM,CAAAC,KAAK,CAAGD,CAAC,CAACE,MAAM,CAACD,KAAK,CAACE,OAAO,CAAC,QAAQ,CAAE,EAAE,CAAC,CAClD,GAAIF,KAAK,CAACG,MAAM,EAAI,EAAE,CAAE,CACtBb,QAAQ,CAACU,KAAK,CAAC,CACjB,CACF,CAAC,CAED,KAAM,CAAAI,YAAY,CAAG,KAAO,CAAAL,CAAC,EAAK,CAChCA,CAAC,CAACM,cAAc,CAAC,CAAC,CAClB,GAAI,CAACd,cAAc,CAAE,CACnBe,KAAK,CAAC,uBAAuB,CAAC,CAC9B,OACF,CACA,GAAIjB,KAAK,CAACc,MAAM,GAAK,EAAE,CAAE,CACvBG,KAAK,CAAC,qBAAqB,CAAC,CAC5B,OACF,CAEA,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGvB,OAAO,kBAAkB,CAAE,CACzDwB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAE1B,KAAK,CAAEE,KAAK,CAAEyB,eAAe,CAAEvB,cAAe,CAAC,CACxE,CAAC,CAAC,CAEF,GAAIgB,QAAQ,CAACQ,EAAE,CAAE,CACf,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAClCvB,aAAa,CAACsB,IAAI,CAACE,WAAW,CAAC,CAC/BtB,eAAe,CAAC,IAAI,CAAC,CACrBU,KAAK,CAAC,GAAGU,IAAI,CAACG,OAAO,WAAWH,IAAI,CAACI,UAAU,EAAE,CAAC,CACpD,CAAC,IAAM,CACL,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAd,QAAQ,CAACU,IAAI,CAAC,CAAC,CACvCX,KAAK,CAAC,OAAOe,SAAS,CAACC,MAAM,EAAE,CAAC,CAClC,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACtCjB,KAAK,CAAC,uBAAuBiB,KAAK,CAACJ,OAAO,EAAE,CAAC,CAC/C,CACF,CAAC,CAED,KAAM,CAAAM,SAAS,CAAGA,CAAA,GAAM,CACtBrC,QAAQ,CAAC,EAAE,CAAC,CACZE,QAAQ,CAAC,EAAE,CAAC,CACZE,iBAAiB,CAAC,KAAK,CAAC,CACxBE,aAAa,CAAC,EAAE,CAAC,CACjBE,eAAe,CAAC,KAAK,CAAC,CACxB,CAAC,CAED,KAAM,CAAA8B,eAAe,CAAGA,CAAA,GAAM,CAC5B7B,QAAQ,CAAC,oBAAoBJ,UAAU,EAAE,CAAC,CAC5C,CAAC,CAED;AACA,KAAM,CAAAkC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B9B,QAAQ,CAAC,aAAa,CAAC,CAAE;AAC3B,CAAC,CAED,GAAIF,YAAY,CAAE,CAChB,mBACEX,KAAA,QAAK4C,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnC/C,IAAA,OAAA+C,QAAA,CAAI,6EAAe,CAAI,CAAC,cACxB7C,KAAA,MAAA6C,QAAA,EAAG,gDAAW,cAAA/C,IAAA,WAAA+C,QAAA,CAASpC,UAAU,CAAS,CAAC,EAAG,CAAC,cAC/CX,IAAA,MAAA+C,QAAA,CAAG,kGAAqB,CAAG,CAAC,cAC5B/C,IAAA,WAAQgD,OAAO,CAAEJ,eAAgB,CAAAG,QAAA,CAAC,oDAAU,CAAQ,CAAC,cACrD/C,IAAA,WAAQgD,OAAO,CAAEL,SAAU,CAAAI,QAAA,CAAC,uCAAO,CAAQ,CAAC,EACzC,CAAC,CAEV,CAEA,mBACE7C,KAAA,QAAK4C,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzC7C,KAAA,SAAM+C,QAAQ,CAAE3B,YAAa,CAACwB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eAC7D/C,IAAA,UACEkD,IAAI,CAAC,OAAO,CACZhC,KAAK,CAAEb,KAAM,CACb8C,QAAQ,CAAGlC,CAAC,EAAKX,QAAQ,CAACW,CAAC,CAACE,MAAM,CAACD,KAAK,CAAE,CAC1CkC,WAAW,CAAC,sEAAe,CAC3BC,QAAQ,MACT,CAAC,cACFrD,IAAA,UACEkD,IAAI,CAAC,KAAK,CACVhC,KAAK,CAAEX,KAAM,CACb4C,QAAQ,CAAEnC,iBAAkB,CAC5BoC,WAAW,CAAC,6FAAuB,CACnCE,OAAO,CAAC,WAAW,CACnBD,QAAQ,MACT,CAAC,cACFrD,IAAA,WAAQkD,IAAI,CAAC,QAAQ,CAAAH,QAAA,CAAC,0BAAI,CAAQ,CAAC,cAEnC7C,KAAA,QAAK4C,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC/C,IAAA,UACEkD,IAAI,CAAC,UAAU,CACfK,EAAE,CAAC,gBAAgB,CACnBC,OAAO,CAAE/C,cAAe,CACxB0C,QAAQ,CAAGlC,CAAC,EAAKP,iBAAiB,CAACO,CAAC,CAACE,MAAM,CAACqC,OAAO,CAAE,CACrDH,QAAQ,MACT,CAAC,cACFrD,IAAA,UAAOyD,OAAO,CAAC,gBAAgB,CAAAV,QAAA,CAAC,iGAAoB,CAAO,CAAC,EACzD,CAAC,cAEN7C,KAAA,QAAK4C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B/C,IAAA,OAAA+C,QAAA,CAAI,mDAAS,CAAI,CAAC,cAClB7C,KAAA,MAAA6C,QAAA,EAAG,8HAED,cAAA/C,IAAA,QAAK,CAAC,uIAEN,cAAAA,IAAA,QAAK,CAAC,+HAEN,cAAAA,IAAA,QAAK,CAAC,8UAGR,EAAG,CAAC,EACD,CAAC,EACF,CAAC,cAEPE,KAAA,QAAK4C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B/C,IAAA,MAAA+C,QAAA,CAAG,iEAAa,CAAG,CAAC,cACpB/C,IAAA,WAAQgD,OAAO,CAAEH,iBAAkB,CAACC,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAC,uCAAO,CAAQ,CAAC,EACjF,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAA3C,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}